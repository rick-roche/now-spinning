name = "now-spinning-api"
main = "src/index.ts"
compatibility_date = "2026-02-20"

kv_namespaces = [
  { binding = "NOW_SPINNING_KV", id = "DEV_KV" }
]

[vars]
PUBLIC_APP_ORIGIN = "http://localhost:5173"
LASTFM_CALLBACK_URL = "http://localhost:8787/api/auth/lastfm/callback"
DISCOGS_CALLBACK_URL = "http://localhost:8787/api/auth/discogs/callback"
DEV_MODE = "true"

[env.production]
name = "now-spinning-api"
kv_namespaces = [
  { binding = "NOW_SPINNING_KV", id = "1d0f824e743e4228a407d19deb6f416c", preview_id = "618e3ab2ce1a427ca28f566697420755" }
]

[env.production.vars]
PUBLIC_APP_ORIGIN = "https://now-spinning.rickroche.com"
LASTFM_CALLBACK_URL = "https://now-spinning.rickroche.com/api/auth/lastfm/callback"
DISCOGS_CALLBACK_URL = "https://now-spinning.rickroche.com/api/auth/discogs/callback"
DEV_MODE = "false"


# Secrets (set with: wrangler secret put KEY)
# Note: These are required before OAuth flows will work:
#   - LASTFM_API_KEY
#   - LASTFM_API_SECRET
#   - DISCOGS_CONSUMER_KEY
#   - DISCOGS_CONSUMER_SECRET
